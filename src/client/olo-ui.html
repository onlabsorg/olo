<div class="olo-ui">

    <md-app md-waterfall md-mode="fixed" class="olo-document">
        
        
        <!--    
          --
          --    Toolbar
          --
          -->
        
        <md-app-toolbar class="md-small" md-large>
            
            <img src="/src/olo.svg" height="40" width="40">

            <div class="md-title">
                <span v-if="!editMode">{{doc.title}}</span>
                <md-field md-inline v-if="editMode">
                    <label>Title</label>
                    <md-input v-model="doc.title"></md-input>
                </md-field>
            </div>
            
            <md-button class="md-icon-button" v-if="!editMode" @click="reload">
                <md-icon>autorenew</md-icon>
            </md-button>

            <md-button class="md-icon-button" v-if="!editMode" @click="editMode=true">
                <md-icon>edit</md-icon>
            </md-button>
            
            <md-button class="md-icon-button" v-if="editMode" @click="save">
                <md-icon>save</md-icon>
            </md-button>
            
            <md-button class="md-icon-button" v-if="editMode" @click="editMode=false">
                <md-icon>clear</md-icon>
            </md-button>

            <md-button class="md-icon-button" v-if="editMode" @click="editMode=false; save()">
                <md-icon>done</md-icon>
            </md-button>

            <md-menu md-size="big" md-align-trigger>
                
                <md-button class="md-icon-button" md-menu-trigger>
                    <md-icon>account_circle</md-icon>
                </md-button>

                <md-menu-content>
                    
                    <md-menu-item>
                        <strong>{{user.id || "Anonymous user"}}</strong>
                    </md-menu-item>
                    
                    <md-divider></md-divider>

                    <md-menu-item v-if="user.id == null" @click="signin">
                        Sign in with Google
                    </md-menu-item>
                    
                    <md-menu-item v-if="user.id != null" @click="signout">
                        Sign out
                    </md-menu-item>
                    
                </md-menu-content>
                
            </md-menu>

        </md-app-toolbar>


        <!--    
          --
          --    Content
          --
          -->
          
        <md-app-content class="main-window">
            <div v-if="!editMode" v-html="rendering"></div>
            <ace-editor v-if="editMode" v-model="doc.template" @init="initEditor" 
                        lang="html" theme="chrome" width="100%" height="100%"
                        :options="editorOptions">
                    </ace-editor>
        </md-app-content>




    </md-app>



    <!--     
      --
      --    Snackbars
      --
      -->

    <md-snackbar md-position="center" :md-duration="4000" :md-active.sync="message.show" md-persistent>
        <span>{{message.text}}</span>
        <md-button class="md-primary" @click="message.show = false">OK</md-button>        
    </md-snackbar>

</div>
