<div class="olo-ui">

    <md-app md-waterfall md-mode="fixed" class="olo-webui">
        
        
        <!--    
          --
          --    Toolbar
          --
          -->
        
        <md-app-toolbar class="md-small" md-large>
            
            <md-button class="md-icon-button" @click="showAppMenu = !showAppMenu">
                <img src="/lib/olo.svg" height="40" width="40">
            </md-button>
            
            <div class="md-title">
                <span v-if="!editMode">{{doc.title}}</span>
                <md-field md-inline v-if="editMode">
                    <label>Title</label>
                    <md-input v-model="doc.title"></md-input>
                </md-field>
            </div>
            
            <md-button class="md-icon-button" @click="save" :disabled="readOnly">
                <md-icon>save</md-icon>
                <md-tooltip delay="500">Save [ctrl-s]</md-tooltip>
            </md-button>

            <md-button class="md-icon-button" v-if="editMode == 'template'" @click="editMode='settings'" :disabled="readOnly">
                <md-icon>settings</md-icon>
                <md-tooltip delay="500">Edit settings</md-tooltip>
            </md-button>

            <md-button class="md-icon-button" v-if="editMode == 'settings'" @click="editMode='template'" :disabled="readOnly">
                <md-icon>subject</md-icon>
                <md-tooltip delay="500">Edit template</md-tooltip>
            </md-button>
            
            <md-button class="md-icon-button" v-if="!editMode" @click="editMode='template'">
                <md-icon>edit</md-icon>
                <md-tooltip delay="500">Edit [ctrl-e]</md-tooltip>
            </md-button>
            
            <md-button class="md-icon-button" v-if="editMode" @click="editMode=false">
                <md-icon>done</md-icon>
                <md-tooltip delay="500">Render [ctrl-e]</md-tooltip>
            </md-button>
        </md-app-toolbar>


        <md-app-drawer :md-active.sync="showAppMenu" md-persistent="full">
            <md-toolbar class="md-transparent" md-elevation="0">
                <strong>olo docs v.{{appInfo.version}}</strong>
                <div class="md-toolbar-section-end">
                    <md-button class="md-icon-button md-dense" @click="showAppMenu=false">
                        <md-icon>keyboard_arrow_left</md-icon>
                    </md-button>
                </div>
            </md-toolbar>

            <md-list>
                
                <md-subheader>User</md-subheader>
                
                <md-list-item>
                    <md-icon>account_circle</md-icon>
                    <span class="md-list-item-text">
                        <strong>{{user.id || "Anonymous user"}}</strong>
                    </span>                    
                </md-list-item>
                
                <md-list-item v-if="user.id == null" @click="signin">
                    <md-icon>arrow_forward</md-icon>
                    <span class="md-list-item-text">Sign in with Google</span>                    
                </md-list-item>
                
                <md-list-item v-if="user.id != null" @click="signout">
                    <md-icon>arrow_back</md-icon>
                    <span class="md-list-item-text">Sign out</span>                    
                </md-list-item>
                
            </md-list>
        </md-app-drawer>



        <!--    
          --
          --    Content
          --
          -->
          
        <md-app-content class="main-window">
            <olo-viewer :content="editMode ? '' : html"></olo-viewer>
            <olo-editor v-if="editMode" :content="editorContent" width="100%" height="100%"> </olo-editor>
        </md-app-content>

    </md-app>



    <!--     
      --
      --    Snackbars
      --
      -->

    <md-snackbar md-position="center" :md-duration="4000" :md-active.sync="message.show" md-persistent>
        <span>{{message.text}}</span>
        <md-button class="md-primary" @click="message.show = false">OK</md-button>        
    </md-snackbar>

</div>
