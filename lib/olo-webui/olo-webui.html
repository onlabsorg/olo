<div class="olo-ui">

    <md-app md-waterfall md-mode="fixed" class="olo-webui">
        
        
        <!--    
          --
          --    Toolbar
          --
          -->
        
        <md-app-toolbar class="md-small" md-large>

            <md-button class="md-icon-button" @click="dialog.show=true">
                <img id="logo" src="/lib/olo.svg" height="40" width="40">
            </md-button>

            <div class="md-title">{{docData.title}}</div>
            
            <md-button class="md-icon-button" v-if="!editMode" @click="save" :disabled="readOnly">
                <md-icon>save</md-icon>
                <md-tooltip delay="500">Save [ctrl-s]</md-tooltip>
            </md-button>

            <md-button class="md-icon-button" v-if="!editMode" @click="editMode=true">
                <md-icon>edit</md-icon>
                <md-tooltip delay="500">Edit [ctrl-e]</md-tooltip>
            </md-button>
            
            <md-button class="md-icon-button" v-if="editMode" @click="editMode=false">
                <md-icon>done</md-icon>
                <md-tooltip delay="500">Render [ctrl-e]</md-tooltip>
            </md-button>
            
        </md-app-toolbar>



        <!--    
          --
          --    Content
          --
          -->
          
        <md-app-content class="main-window">
            <olo-viewer v-if="!editMode" :content="docData.html" :allowed_tags="allowedTags"></olo-viewer>
            <olo-editor v-if="editMode" :docData="docData" width="100%" height="100%"> </olo-editor>
        </md-app-content>

    </md-app>
    
    

    <!--     
      --
      --    Dialog
      --
      -->
    
    <md-dialog :md-active.sync="dialog.show">
        <md-dialog-title>OnLabs.org documents</md-dialog-title>

        <md-tabs md-dynamic-height @md-changed="dialogTabChanged">
            
            <md-tab id="info" md-label="Info">
                <p>olowiki version {{appInfo.version}}</p>
            </md-tab>

            <md-tab id="user" md-label="User">
                <p>Logged in as <strong>{{user.id || "Anonymous user"}}</strong></p>
            </md-tab>

        </md-tabs>

        <md-dialog-actions>
            <md-button class="md-primary" v-if="dialog.tabId == 'user' && user.id == null" @click="signin">Sign in with Google</md-button>
            <md-button class="md-primary" v-if="dialog.tabId == 'user' && user.id != null" @click="signout">Sign out</md-button>
            <md-button class="md-primary" @click="dialog.show = false">Close</md-button>
        </md-dialog-actions>
        
    </md-dialog>
    



    <!--     
      --
      --    Snackbars
      --
      -->

    <md-snackbar md-position="center" :md-duration="4000" :md-active.sync="message.show" md-persistent>
        <span>{{message.text}}</span>
        <md-button class="md-primary" @click="message.show = false">OK</md-button>        
    </md-snackbar>

</div>
