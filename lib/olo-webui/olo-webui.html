<div class="olo-ui">

    <md-app md-waterfall md-mode="fixed" class="olo-webui">
        
        
        <!--    
          --
          --    Toolbar
          --
          -->
        
        <md-app-toolbar class="md-small" md-large>

            <md-button class="md-icon-button" @click="showNavigation=true">
                <img id="logo" src="/lib/olo.svg" height="40" width="40">
            </md-button>

            <div class="md-title">{{docTitle}}</div>
            
            <md-button class="md-icon-button" @click="save">
                <md-icon>save</md-icon>
            </md-button>

            <md-button class="md-icon-button" v-if="!editMode" @click="editMode=true">
                <md-icon>edit</md-icon>
            </md-button>
            
            <md-button class="md-icon-button" v-if="editMode" @click="editMode=false">
                <md-icon>done</md-icon>
            </md-button>
            
        </md-app-toolbar>


        <!--    
          --
          --    Content
          --
          -->
          
        <md-app-content class="main-window">
            <olo-viewer v-if="!editMode" :content="docHTML" :allowed_tags="allowedTags"></olo-viewer>
            <olo-editor v-if="editMode" v-model="docSource" :lang="sourceLanguage" width="100%" height="100%"> </olo-editor>
        </md-app-content>

    </md-app>


    <!--    
      --
      --    Drawer
      --
      -->

    <md-drawer :md-active.sync="showNavigation">
        
        <md-toolbar md-elevation="0">
            <span class="md-title">olowiki</span>
        </md-toolbar>

        <md-list class="md-double-line">
             <md-list-item>
                 <md-icon class="md-primary">description</md-icon>
                 <div class="md-list-item-text">
                     <span><strong>Document</strong></span>
                     <span>{{docPath}}</span>
                 </div>
             </md-list-item>
        </md-list>
        <md-list>             
            <md-list-item v-if="!editMode" @click="editMode=true; showNavigation=false">
                <md-icon>edit</md-icon>
                <span class="md-list-item-text">Edit</span>
            </md-list-item>            
            <md-list-item v-if="editMode" @click="editMode=false; showNavigation=false">
                <md-icon>done</md-icon>
                <span class="md-list-item-text">Commit</span>
            </md-list-item>
            <md-list-item :disabled="readOnly" @click="save(); showNavigation=false">
                <md-icon>save</md-icon>
                <span class="md-list-item-text">Save</span>
            </md-list-item>
        </md-list>
        
        <md-divider></md-divider>

        <md-list class="md-double-line">
            <md-list-item>
                <md-icon class="md-primary">person</md-icon>
                <div class="md-list-item-text">
                    <span><strong>User</strong></span>
                    <span>{{userid || "Guest"}}</span>
                </div>
            </md-list-item>
        </md-list>
        <md-list>
            <md-list-item v-if="!userid" @click="signin">
                <md-icon>arrow_forward</md-icon>
                <span class="md-list-item-text">Sign in with Google</span>
            </md-list-item>
            <md-list-item v-if="userid" @click="signout">
                <md-icon>arrow_back</md-icon>
                <span class="md-list-item-text">Sign out</span>
            </md-list-item>
        </md-list>
        
        <md-divider></md-divider>
        
        <md-content class="drawer-info-card">
            <p>olowiki v. {{appInfo.version}}</p>
            <p>&#9400; 2018 OnLabs.org</p>
        </md-content>

    </md-drawer>
    
    

    <!--     
      --
      --    Snackbars
      --
      -->

    <md-snackbar md-position="center" :md-duration="4000" :md-active.sync="message.show" md-persistent>
        <span>{{message.text}}</span>
        <md-button class="md-primary" @click="message.show = false">OK</md-button>        
    </md-snackbar>

</div>
